method = "quantile",
nclass=5,
col = carto.pal(pal1 = "orange.pal", n1 = 5),
border = "black",
lwd = 0.5,
legend.pos = "topright",
legend.title.txt = "Población total\n(Clasificación por Quintiles)",
add = TRUE
)
plot(st_geometry(vias),
col = "grey40",
border = "grey",
bg = "grey90",
lwd = .1,
xlim = c(st_bbox(pobla)[c(1,3)]),
ylim = c(st_bbox(pobla)[c(2,4)]))
# plot population density
choroLayer(
x = pobla,
var = names(pobla)[3],
method = "quantile",
nclass=5,
col = carto.pal(pal1 = "orange.pal", n1 = 5),
border = "black",
lwd = 0.5,
legend.pos = "topright",
legend.title.txt = "Población total\n(Clasificación por Quintiles)",
add = TRUE
)
# layout
layoutLayer(title = "Número de habitantes por sector catastral",
sources = "Fuente: SISBEN (2016)",
author = paste0("Elaboración propia\nDatum:CTM12\nLibrería R: cartography ", packageVersion("cartography")),
frame = FALSE, north = FALSE, tabtitle = TRUE)
# north arrow
north(pos = "topleft")
# Guardar
jpeg(filename = paste(rutas$figuras,"Coropletas por Quintiles.jpeg",sep=""), width = 180, height = 180,
units = "mm", res = 300)
plot(st_geometry(vias),
col = "grey40",
border = "grey",
bg = "grey90",
lwd = .1,
xlim = c(st_bbox(pobla)[c(1,3)]),
ylim = c(st_bbox(pobla)[c(2,4)]))
# plot population density
choroLayer(
x = pobla,
var = names(pobla)[3],
method = "quantile",
nclass=5,
col = carto.pal(pal1 = "orange.pal", n1 = 5),
border = "black",
lwd = 0.5,
legend.pos = "topright",
legend.title.txt = "Población total\n(Clasificación por Quintiles)",
add = TRUE
)
# layout
layoutLayer(title = "Número de habitantes por sector catastral",
sources = "Fuente: SISBEN (2016)",
author = paste0("Elaboración propia\nDatum:CTM12\nLibrería R: cartography ", packageVersion("cartography")),
frame = FALSE, north = FALSE, tabtitle = TRUE)
north(pos = "topleft")
plot(st_geometry(vias),
col = "grey40",
border = "grey",
bg = "grey90",
lwd = .1,
xlim = c(st_bbox(pobla)[c(1,3)]),
ylim = c(st_bbox(pobla)[c(2,4)]))
# plot population density
choroLayer(
x = pobla,
var = names(pobla)[3],
method = "quantile",
nclass=5,
col = carto.pal(pal1 = "orange.pal", n1 = 5),
border = "black",
lwd = 0.5,
legend.pos = "topright",
legend.title.txt = "Población total\n(Clasificación por Quintiles)",
add = TRUE
)
# layout
layoutLayer(title = "Número de habitantes por sector catastral",
sources = "Fuente: SISBEN (2016)",
author = paste0("Elaboración propia\nDatum:CTM12\nLibrería R: cartography ", packageVersion("cartography")),
frame = FALSE, north = FALSE, tabtitle = TRUE)
plot(st_geometry(vias),
col = "grey40",
border = "grey",
bg = "grey90",
lwd = .1,
xlim = c(st_bbox(pobla)[c(1,3)]),
ylim = c(st_bbox(pobla)[c(2,4)]))
dev.off()
plot(st_geometry(vias),
col = "grey40",
border = "grey",
bg = "grey90",
lwd = .1,
xlim = c(st_bbox(pobla)[c(1,3)]),
ylim = c(st_bbox(pobla)[c(2,4)]))
# plot population density
choroLayer(
x = pobla,
var = names(pobla)[3],
method = "quantile",
nclass=5,
col = carto.pal(pal1 = "orange.pal", n1 = 5),
border = "black",
lwd = 0.5,
legend.pos = "topright",
legend.title.txt = "Población total\n(Clasificación por Quintiles)",
add = TRUE
)
# layout
layoutLayer(title = "Número de habitantes por sector catastral",
sources = "Fuente: SISBEN (2016)",
author = paste0("Elaboración propia\nDatum:CTM12\nLibrería R: cartography ", packageVersion("cartography")),
frame = FALSE, north = FALSE, tabtitle = TRUE)
north(pos = "topleft")
dev.off()
dev.off()
help("choroLayer")
plot(st_geometry(vias),
col = "grey40",
border = "grey",
bg = "grey90",
lwd = .1,
xlim = c(st_bbox(pobla)[c(1,3)]),
ylim = c(st_bbox(pobla)[c(2,4)]))
# plot population density
choroLayer(
x = pobla,
var = names(pobla)[3],
method = "fisher-jenks",
nclass=5,
col = carto.pal(pal1 = "orange.pal", n1 = 5),
border = "black",
lwd = 0.5,
legend.pos = "topright",
legend.title.txt = "Población total\n(Quiebres de Pretty)",
add = TRUE
)
PrettyBreaks<-pretty(pobla$Pop_Tot)
P<-c("[0-2000]","[2001-4000]","[4001-6000]","[6001-8000]")
for (i in seq_along(PrettyBreaks)) {
pobla$PrettyBreaks[pobla$Pop_Tot<=PrettyBreaks[2]]<-P[1]
pobla$PrettyBreaks[pobla$Pop_Tot<=PrettyBreaks[i]&pobla$Pop_Tot>PrettyBreaks[i - 1]]<-P[i - 1]
}
rm(P,PrettyBreaks)
m4<-ggplot() +
annotation_scale()+
annotation_north_arrow(location = "tr", which_north = "true",
pad_x = unit(0.05, "in"), pad_y = unit(0.2, "in"),
style = north_arrow_fancy_orienteering) +
geom_sf(data = vias,fill="gray20",color="black", alpha = 0.2)+
geom_sf(data = pobla, aes(fill = PrettyBreaks), alpha = 0.99, color ="black") +
scale_fill_brewer(palette = "YlOrRd",guide="legend") +
theme_gray()+ # Modifica las características de fondo y delineado de retícula
xlab("Longitud") + ylab("Latitud")+
ggtitle("Número de habitantes por sector catastral",
subtitle = "Quiebres de Pretty")+
coord_sf(xlim = c(st_bbox(pobla)[c(1,3)]), ylim = c(st_bbox(pobla)[c(2,4)]))
x11()
m4
# plot population density
choroLayer(
x = pobla,
var = names(pobla)[3],
method = "fisher-jenks",
nclass=3,
col = carto.pal(pal1 = "orange.pal", n1 = 3),
border = "black",
lwd = 0.5,
legend.pos = "topright",
legend.title.txt = "Población total\n(Quiebres de Pretty)",
add = TRUE
)
plot(st_geometry(vias),
col = "grey40",
border = "grey",
bg = "grey90",
lwd = .1,
xlim = c(st_bbox(pobla)[c(1,3)]),
ylim = c(st_bbox(pobla)[c(2,4)]))
# plot population density
choroLayer(
x = pobla,
var = names(pobla)[3],
method = "fisher-jenks",
nclass=3,
col = carto.pal(pal1 = "orange.pal", n1 = 3),
border = "black",
lwd = 0.5,
legend.pos = "topright",
legend.title.txt = "Población total\n(Quiebres de Pretty)",
add = TRUE
)
plot(st_geometry(vias),
col = "grey40",
border = "grey",
bg = "grey90",
lwd = .1,
xlim = c(st_bbox(pobla)[c(1,3)]),
ylim = c(st_bbox(pobla)[c(2,4)]))
# plot population density
choroLayer(
x = pobla,
var = names(pobla)[3],
method = "fisher-jenks",
nclass=3,
col = carto.pal(pal1 = "orange.pal", n1 = 3),
border = "black",
lwd = 0.5,
legend.pos = "topright",
legend.title.txt = "Población total\n(Quiebres de Pretty)",
add = TRUE
)
x11(m4)
m4
plot(st_geometry(vias),
col = "grey40",
border = "grey",
bg = "grey90",
lwd = .1,
xlim = c(st_bbox(pobla)[c(1,3)]),
ylim = c(st_bbox(pobla)[c(2,4)]))
# plot population density
choroLayer(
x = pobla,
var = names(pobla)[3],
method = "pretty",
nclass=3,
col = carto.pal(pal1 = "orange.pal", n1 = 3),
border = "black",
lwd = 0.5,
legend.pos = "topright",
legend.title.txt = "Población total\n(Quiebres de Pretty)",
add = TRUE
)
plot(st_geometry(vias),
col = "grey40",
border = "grey",
bg = "grey90",
lwd = .1,
xlim = c(st_bbox(pobla)[c(1,3)]),
ylim = c(st_bbox(pobla)[c(2,4)]))
# plot population density
choroLayer(
x = pobla,
var = names(pobla)[3],
method = "pretty",
nclass=3,
col = carto.pal(pal1 = "orange.pal", n1 = 3),
border = "black",
lwd = 0.5,
legend.pos = "topright",
legend.title.txt = "Población total\n(Quiebres de Pretty)",
add = TRUE
)
x11()
m4
max(pobla$Pop_Tot)
# plot population density
choroLayer(
x = pobla,
var = names(pobla)[3],
method = "pretty",
nclass=3,
col = carto.pal(pal1 = "orange.pal", n1 = 4),
border = "black",
lwd = 0.5,
legend.pos = "topright",
legend.title.txt = "Población total\n(Quiebres de Pretty)",
add = TRUE
)
# plot population density
choroLayer(
x = pobla,
var = names(pobla)[3],
method = "pretty",
nclass=3,
col = carto.pal(pal1 = "orange.pal", n1 = 4),
border = "black",
lwd = 0.5,
legend.pos = "topright",
legend.title.txt = "Población total\n(Quiebres de Pretty)",
add = TRUE
)
plot(st_geometry(vias),
col = "grey40",
border = "grey",
bg = "grey90",
lwd = .1,
xlim = c(st_bbox(pobla)[c(1,3)]),
ylim = c(st_bbox(pobla)[c(2,4)]))
# plot population density
choroLayer(
x = pobla,
var = names(pobla)[3],
method = "pretty",
nclass=3,
col = carto.pal(pal1 = "orange.pal", n1 = 4),
border = "black",
lwd = 0.5,
legend.pos = "topright",
legend.title.txt = "Población total\n(Quiebres de Pretty)",
add = TRUE
)
# layout
layoutLayer(title = "Número de habitantes por sector catastral",
sources = "Fuente: SISBEN (2016)",
author = paste0("Elaboración propia\nDatum:CTM12\nLibrería R: cartography ", packageVersion("cartography")),
frame = FALSE, north = FALSE, tabtitle = TRUE)
# plot population density
choroLayer(
x = pobla,
var = names(pobla)[3],
method = "pretty",
nclass=4,
col = carto.pal(pal1 = "orange.pal", n1 = 4),
border = "black",
lwd = 0.5,
legend.pos = "topright",
legend.title.txt = "Población total\n(Quiebres de Pretty)",
add = TRUE
)
m4
# plot population density
choroLayer(
x = pobla,
var = names(pobla)[3],
method = "pretty",
nclass=4,
col = carto.pal(pal1 = "orange.pal", n1 = 4),
border = "black",
lwd = 0.5,
legend.pos = "topright",
legend.title.txt = "Población total\n(Quiebres de Pretty)",
add = TRUE
)
plot(st_geometry(vias),
col = "grey40",
border = "grey",
bg = "grey90",
lwd = .1,
xlim = c(st_bbox(pobla)[c(1,3)]),
ylim = c(st_bbox(pobla)[c(2,4)]))
# plot population density
choroLayer(
x = pobla,
var = names(pobla)[3],
method = "pretty",
nclass=4,
col = carto.pal(pal1 = "orange.pal", n1 = 4),
border = "black",
lwd = 0.5,
legend.pos = "topright",
legend.title.txt = "Población total\n(Quiebres de Pretty)",
add = TRUE
)
# layout
layoutLayer(title = "Número de habitantes por sector catastral",
sources = "Fuente: SISBEN (2016)",
author = paste0("Elaboración propia\nDatum:CTM12\nLibrería R: cartography ", packageVersion("cartography")),
frame = FALSE, north = FALSE, tabtitle = TRUE)
# plot population density
choroLayer(
x = pobla,
var = names(pobla)[3],
method = "geom",
nclass=5,
col = carto.pal(pal1 = "orange.pal", n1 = 5),
border = "black",
lwd = 0.5,
legend.pos = "topright",
legend.title.txt = "Población total\n(Clasificación por Quintiles)",
add = TRUE
)
# layout
layoutLayer(title = "Número de habitantes por sector catastral",
sources = "Fuente: SISBEN (2016)",
author = paste0("Elaboración propia\nDatum:CTM12\nLibrería R: cartography ", packageVersion("cartography")),
frame = FALSE, north = FALSE, tabtitle = TRUE)
plot(st_geometry(vias),
col = "grey40",
border = "grey",
bg = "grey90",
lwd = .1,
xlim = c(st_bbox(pobla)[c(1,3)]),
ylim = c(st_bbox(pobla)[c(2,4)]))
# plot population density
choroLayer(
x = pobla,
var = names(pobla)[3],
method = "geom",
nclass=5,
col = carto.pal(pal1 = "orange.pal", n1 = 5),
border = "black",
lwd = 0.5,
legend.pos = "topright",
legend.title.txt = "Población total\n(Clasificación por Quintiles)",
add = TRUE
)
# layout
layoutLayer(title = "Número de habitantes por sector catastral",
sources = "Fuente: SISBEN (2016)",
author = paste0("Elaboración propia\nDatum:CTM12\nLibrería R: cartography ", packageVersion("cartography")),
frame = FALSE, north = FALSE, tabtitle = TRUE)
source('/media/jfvl/DiscoA/GitHub/Gráficos/MapasArticulo.R', echo=TRUE)
source('/media/jfvl/DiscoA/GitHub/Gráficos/MapasArticulo.R', echo=TRUE)
help("choroLayer")
# Mapa temático población por barrio
choroLayer(
x = pobla,
var = names(pobla)[3],
method = "geom",
nclass=5,
col = carto.pal(pal1 = "orange.pal", n1 = 5),
border = "black",
lwd = 0.5,
legend.pos = "bottomlright",
legend.title.txt = "Población total\n(Cortes geométricos)",
add = TRUE
)
# layout
layoutLayer(title = "Número de habitantes por sector catastral",
sources = "Fuente: SISBEN (2016)",
author = paste0("Elaboración propia\nDatum:CTM12\nLibrería R: cartography ", packageVersion("cartography")),
frame = FALSE, north = FALSE, tabtitle = TRUE)
plot(st_geometry(vias),
col = "grey40",
border = "grey",
bg = "grey90",
lwd = .1,
xlim = c(st_bbox(pobla)[c(1,3)]),
ylim = c(st_bbox(pobla)[c(2,4)]))
# Mapa temático población por barrio
choroLayer(
x = pobla,
var = names(pobla)[3],
method = "geom",
nclass=5,
col = carto.pal(pal1 = "orange.pal", n1 = 5),
border = "black",
lwd = 0.5,
legend.pos = "bottomlright",
legend.title.txt = "Población total\n(Cortes geométricos)",
add = TRUE
)
# layout
layoutLayer(title = "Número de habitantes por sector catastral",
sources = "Fuente: SISBEN (2016)",
author = paste0("Elaboración propia\nDatum:CTM12\nLibrería R: cartography ", packageVersion("cartography")),
frame = FALSE, north = FALSE, tabtitle = TRUE)
plot(st_geometry(vias),
col = "grey40",
border = "grey",
bg = "grey90",
lwd = .1,
xlim = c(st_bbox(pobla)[c(1,3)]),
ylim = c(st_bbox(pobla)[c(2,4)]))
# Mapa temático población por barrio
choroLayer(
x = pobla,
var = names(pobla)[3],
method = "geom",
nclass=5,
col = carto.pal(pal1 = "orange.pal", n1 = 5),
border = "black",
lwd = 0.5,
legend.pos = "bottomright",
legend.title.txt = "Población total\n(Cortes geométricos)",
add = TRUE
)
# layout
layoutLayer(title = "Número de habitantes por sector catastral",
sources = "Fuente: SISBEN (2016)",
author = paste0("Elaboración propia\nDatum:CTM12\nLibrería R: cartography ", packageVersion("cartography")),
frame = FALSE, north = FALSE, tabtitle = TRUE)
#!/usr/bin/env Rscript --vanilla
###############################################################################
# # Autor: John Fredy Valbuena L.
# # Fecha: Marzo 25
# # Versión de R: 4.0.4
###############################################################################
rm(list = ls())
source('/media/jfvl/DiscoA/GitHub/Gráficos/MapasArticulo.R', echo=TRUE)
plot(st_geometry(vias),
col = "grey40",
border = "grey",
bg = "grey90",
lwd = .1,
add = TRUE,
xlim = c(st_bbox(pobla)[c(1,3)]),
ylim = c(st_bbox(pobla)[c(2,4)]))
# plot Símbolos proporcionales
propSymbolsLayer(
x = pobla,
var = names(pobla)[3],
inches = 0.2,
symbols = "circle",
col = "brown",
legend.pos = "topright",
legend.title.txt = "Población total\n(Simbolos proporcionales)"
)
source('/media/jfvl/DiscoA/GitHub/Gráficos/MapasArticulo.R', echo=TRUE)
source('/media/jfvl/DiscoA/GitHub/Gráficos/MapasArticulo.R', echo=TRUE)
